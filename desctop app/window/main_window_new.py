# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'main_window.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from .main_window import Ui_MainWindow
from data_base.hakaton_db import data_base


class MainWindow_super(Ui_MainWindow):
    def __init__(self):
        self.data = data_base('../data_base/main_db.db')

    def setupUi(self, MainWindow):
        Ui_MainWindow.setupUi(self, MainWindow)
        self.pushButton_new_coach.clicked.connect(self.add_coach)
        self.pushButton_coach_delete.clicked.connect(self.delete_coach)
        self.comboBox_coach.actionEvent(self.combo_box())

    def retranslateUi(self, MainWindow):
        Ui_MainWindow.retranslateUi(self, MainWindow)
        print(self.data.return_list_names('coach'))
        self.reboot_list()

    def reboot_list(self):
        self.comboBox_coach.clear()
        for i in self.data.return_list_names('coach'):
            self.comboBox_coach.addItem(i)

    def delete_coach(self):
        self.data.delete_info('coach', ['name'], [self.lineEdit_coach_name.text()])
        self.reboot_list()

    def add_coach(self):
        if self.lineEdit_coach_name.text() != '' and self.lineEdit_coach_price != '' and self.lineEdit_coach_id != '':
            self.data.add_coach(self.lineEdit_coach_name.text(), self.lineEdit_coach_price.text(),
                                self.lineEdit_coach_id.text())
        self.reboot_list()

    def combo_box(self):
        print('heh')
